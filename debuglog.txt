Console pr√™te - Mode Privil√©gi√©: ACTIF


======================================================================
D√âMARRAGE: Installation compl√®te de MaxLink
Script: /media/prod/USBTOOL/scripts/install/full_install_install.sh
======================================================================

[INFO] Script full_install_install initialis√©
[H[2J[3J
========================================================================
 MAXLINK‚Ñ¢ - INSTALLATION COMPL√àTE V3
 ¬© 2025 WERIT. Tous droits r√©serv√©s.
========================================================================

Installation automatique de tous les composants MaxLink :

  ‚Ä¢ Mise √† jour syst√®me et cache
  ‚Ä¢ Point d'acc√®s WiFi
  ‚Ä¢ Serveur Web et Dashboard
  ‚Ä¢ Correctif NCSI Windows
  ‚Ä¢ Broker MQTT
  ‚Ä¢ Widgets MQTT
  ‚Ä¢ Systeme php
  ‚Ä¢ Orchestrateur et finalisation

L'installation compl√®te prendra environ 10 minutes.

D√©marrage de l'installation...

[INFO] ========== D√âBUT DE L'INSTALLATION COMPL√àTE MAXLINK ==========

========================================================================
√âTAPE 1/8 : Mise √† jour syst√®me et cache
========================================================================

‚ó¶ Ex√©cution de update_install.sh...

[INFO] Ex√©cution de update_install.sh
[INFO] Script update_install initialis√©
[INFO] ========== D√âBUT DE LA MISE √Ä JOUR SYST√àME V11 ==========
========================================================================
√âTAPE 1 : PR√âPARATION DU SYST√àME
========================================================================

‚ó¶ Stabilisation du syst√®me apr√®s d√©marrage...
  ‚Ü¶ Initialisation des services r√©seau...
[INFO] Stabilisation du syst√®me - attente 10s pour OS frais

‚ó¶ D√©sactivation temporaire des mises √† jour automatiques...
[INFO] D√©sactivation des mises √† jour automatiques
  ‚Ü¶ Mises √† jour automatiques suspendues ‚úì
[INFO] Sauvegarde de l'√©tat r√©seau actuel
[INFO] Mode AP non actif
[INFO] D√©j√† connect√© au WiFi Max

‚ó¶ V√©rification de l'interface WiFi...
  ‚Ü¶ Interface WiFi d√©tect√©e ‚úì
[INFO] Interface WiFi wlan0 d√©tect√©e
[CMD] Ex√©cution: Activation WiFi
[CMD] Commande: nmcli radio wifi on >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ WiFi activ√© ‚úì

========================================================================
√âTAPE 2 : CONNEXION R√âSEAU
========================================================================

[INFO] V√©rification et √©tablissement de la connexion internet
[INFO] Sauvegarde de l'√©tat r√©seau actuel
[INFO] Mode AP non actif
[INFO] D√©j√† connect√© au WiFi Max
[SUCCESS] Connexion internet d√©j√† disponible
  ‚Ü¶ Stabilisation de la connexion (5s)...
[INFO] Stabilisation de la connexion - attente 5s

========================================================================
√âTAPE 3 : SYNCHRONISATION HORLOGE
========================================================================

‚ó¶ Synchronisation de l'horloge syst√®me...
[INFO] Synchronisation NTP
[CMD] Ex√©cution: Activation NTP
[CMD] Commande: timedatectl set-ntp true
[CMD] Code de sortie: 0
  ‚Ü¶ Attente de la synchronisation NTP...
[INFO] Attente synchronisation NTP - 15s
  ‚Ü¶ Date/Heure: 22/10/2025 10:06:09
[INFO] Heure synchronis√©e: Wed 22 Oct 10:06:09 CEST 2025

========================================================================
√âTAPE 4 : MISE √Ä JOUR DE S√âCURIT√â
========================================================================

‚ó¶ Nettoyage s√©curis√© du syst√®me de paquets...
[INFO] D√©but du nettoyage APT s√©curis√©
‚ó¶ V√©rification de l'√©tat d'APT...
[INFO] V√©rification de l'√©tat d'APT
  ‚Ü¶ APT est libre ‚úì
[INFO] APT libre imm√©diatement
  ‚Ü¶ Nettoyage des processus zombies...
[INFO] Nettoyage des processus zombies
  ‚Ü¶ V√©rification des verrous orphelins...
[INFO] V√©rification des verrous orphelins
    ‚Ä¢ Suppression du verrou orphelin: /var/lib/dpkg/lock
[INFO] Suppression verrou orphelin: /var/lib/dpkg/lock
    ‚Ä¢ Suppression du verrou orphelin: /var/lib/dpkg/lock-frontend
[INFO] Suppression verrou orphelin: /var/lib/dpkg/lock-frontend
    ‚Ä¢ Suppression du verrou orphelin: /var/lib/apt/lists/lock
[INFO] Suppression verrou orphelin: /var/lib/apt/lists/lock
    ‚Ä¢ Suppression du verrou orphelin: /var/cache/apt/archives/lock
[INFO] Suppression verrou orphelin: /var/cache/apt/archives/lock
  ‚Ü¶ Reconfiguration de dpkg...
[CMD] Ex√©cution: Configuration dpkg
[CMD] Commande: dpkg --configure -a
[CMD] Code de sortie: 0
  ‚Ü¶ Syst√®me de paquets nettoy√© ‚úì
[SUCCESS] Nettoyage APT termin√©
  ‚Ü¶ Stabilisation apr√®s nettoyage (3s)...
[INFO] Stabilisation apr√®s nettoyage - attente 3s
‚ó¶ Mise √† jour de la liste des paquets...
[INFO] D√©but de la mise √† jour APT
  ‚Ü¶ Tentative 1/3...
[INFO] Tentative APT update 1/3
Hit:1 http://deb.debian.org/debian trixie InRelease
Hit:2 http://deb.debian.org/debian trixie-updates InRelease
Hit:3 http://deb.debian.org/debian-security trixie-security InRelease
Hit:4 http://archive.raspberrypi.com/debian trixie InRelease
Reading package lists...
  ‚Ü¶ Liste des paquets mise √† jour ‚úì
[SUCCESS] APT update r√©ussi

‚ó¶ Installation des mises √† jour de s√©curit√© critiques...
[INFO] Installation des paquets critiques uniquement
[CMD] Ex√©cution: Mise √† jour s√©curit√©
[CMD] Commande: DEBIAN_FRONTEND=noninteractive apt-get install -y --only-upgrade --allow-unauthenticated openssl libssl* sudo systemd apt dpkg libc6 libpam* ca-certificates tzdata
[OUT] Reading package lists...
[OUT] Building dependency tree...
[OUT] Reading state information...
[OUT] openssl is already the newest version (3.5.1-1+deb13u1+rpt1).
[OUT] libssl3t64 is already the newest version (3.5.1-1+deb13u1+rpt1).
[OUT] Skipping libssl-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-ocaml-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-ocaml, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-doc, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-utils-clojure, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-ocaml-dev:armhf, it is not installed and only upgrades are requested.
[OUT] Skipping libssl-ocaml:armhf, it is not installed and only upgrades are requested.
[OUT] Skipping libssl3t64-dbgsym, it is not installed and only upgrades are requested.
[OUT] sudo is already the newest version (1.9.16p2-3).
[OUT] systemd is already the newest version (257.8-1~deb13u2).
[OUT] apt is already the newest version (3.0.3).
[OUT] dpkg is already the newest version (1.22.21).
[OUT] libc6 is already the newest version (2.41-12+rpt1).
[OUT] libpam0g is already the newest version (1.7.0-5).
[OUT] Skipping libpam-apparmor, it is not installed and only upgrades are requested.
[OUT] libpam-systemd is already the newest version (257.8-1~deb13u2).
[OUT] libpam-runtime is already the newest version (1.7.0-5).
[OUT] libpam-modules is already the newest version (1.7.0-5).
[OUT] Skipping libpam-barada, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-gnome-keyring, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ck-connector, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-tmpdir, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-krb5, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ccreds, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-mount, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-sss, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-mklocaluser, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-python, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-duo, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-fprintd, it is not installed and only upgrades are requested.
[OUT] Skipping libpam0g-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-elogind, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ldapd, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-abl, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-fscrypt, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-pkcs11, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-glome, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-google-authenticator, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-kwallet5, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-kwallet-common, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-mount-bin, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-cap, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-cgroup, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-mysql, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-afs-session, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-heimdal, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-chroot, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-encfs, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-net, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-pwdfile, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-radius-auth, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-script, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ssh, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ufpidentity, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-x2go, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-x2go-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-pwquality, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-cgfs, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-malcontent, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-oath, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ocaml, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ocaml-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-otpw, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-doc, it is not installed and only upgrades are requested.
[OUT] libpam-modules-bin is already the newest version (1.7.0-5).
[OUT] Skipping libpam-geoip, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-p11, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-python-doc, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ssh-agent-auth, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-u2f, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-wrapper, it is not installed and only upgrades are requested.
[OUT] Skipping libpamtest0, it is not installed and only upgrades are requested.
[OUT] Skipping libpamtest0-dev, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-passwdqc, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-poldi, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-winbind, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-shishi, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-slurm, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-slurm-adopt, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-snapper, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-biometric, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-lastlog2, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-wtmpdb, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-yubico, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ocaml:armhf, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-ocaml-dev:armhf, it is not installed and only upgrades are requested.
[OUT] Skipping libpam-zfs, it is not installed and only upgrades are requested.
[OUT] libpam-chksshpwd is already the newest version (2.0).
[OUT] Skipping libpam-chksshpwd-dbgsym, it is not installed and only upgrades are requested.
[OUT] ca-certificates is already the newest version (20250419).
[OUT] tzdata is already the newest version (2025b-4+deb13u1).
[OUT] 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
[CMD] Code de sortie: 0
  ‚Ü¶ Mises √† jour de s√©curit√© install√©es ‚úì
[SUCCESS] Mises √† jour de s√©curit√© install√©es
  ‚Ü¶ Stabilisation apr√®s mises √† jour (5s)...
[INFO] Stabilisation apr√®s mises √† jour - attente 5s

========================================================================
√âTAPE 5 : CR√âATION DU CACHE DE PAQUETS
========================================================================

‚ó¶ Initialisation du syst√®me de cache...
[INFO] Initialisation du cache de paquets
[INFO] Initialisation du cache des paquets
[SUCCESS] Cache initialis√©: /var/cache/maxlink/packages
  ‚Ü¶ Cache initialis√© ‚úì
[SUCCESS] Cache initialis√© avec succ√®s
  ‚Ü¶ Pr√©paration du t√©l√©chargement (3s)...
[INFO] Pr√©paration du t√©l√©chargement - attente 3s

‚ó¶ T√©l√©chargement de tous les paquets MaxLink...
  ‚Ü¶ Cette op√©ration peut prendre quelques minutes...
[INFO] T√©l√©chargement de tous les paquets requis
[INFO] Mise √† jour des listes de paquets APT
‚ó¶ T√©l√©chargement [1/28]: git
[INFO] T√©l√©chargement du paquet: git (cat√©gorie: base)
  ‚Ü¶ git t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: git
‚ó¶ T√©l√©chargement [2/28]: curl
[INFO] T√©l√©chargement du paquet: curl (cat√©gorie: base)
  ‚Ü¶ curl t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: curl
‚ó¶ T√©l√©chargement [3/28]: wget
[INFO] T√©l√©chargement du paquet: wget (cat√©gorie: base)
  ‚Ü¶ wget t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: wget
‚ó¶ T√©l√©chargement [4/28]: ca-certificates
[INFO] T√©l√©chargement du paquet: ca-certificates (cat√©gorie: base)
  ‚Ü¶ ca-certificates t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: ca-certificates
‚ó¶ T√©l√©chargement [5/28]: apt-transport-https
[INFO] T√©l√©chargement du paquet: apt-transport-https (cat√©gorie: base)
  ‚Ü¶ apt-transport-https t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: apt-transport-https
‚ó¶ T√©l√©chargement [6/28]: gnupg
[INFO] T√©l√©chargement du paquet: gnupg (cat√©gorie: base)
  ‚Ü¶ gnupg t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: gnupg
‚ó¶ T√©l√©chargement [7/28]: lsb-release
[INFO] T√©l√©chargement du paquet: lsb-release (cat√©gorie: base)
  ‚Ü¶ lsb-release t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: lsb-release
‚ó¶ T√©l√©chargement [8/28]: nginx
[INFO] T√©l√©chargement du paquet: nginx (cat√©gorie: nginx)
  ‚Ü¶ nginx t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: nginx
‚ó¶ T√©l√©chargement [9/28]: nginx-common
[INFO] T√©l√©chargement du paquet: nginx-common (cat√©gorie: nginx)
  ‚Ü¶ nginx-common t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: nginx-common
‚ó¶ T√©l√©chargement [10/28]: mosquitto
[INFO] T√©l√©chargement du paquet: mosquitto (cat√©gorie: mqtt)
  ‚Ü¶ mosquitto t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: mosquitto
‚ó¶ T√©l√©chargement [11/28]: mosquitto-clients
[INFO] T√©l√©chargement du paquet: mosquitto-clients (cat√©gorie: mqtt)
  ‚Ü¶ mosquitto-clients t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: mosquitto-clients
‚ó¶ T√©l√©chargement [12/28]: libmosquitto1
[INFO] T√©l√©chargement du paquet: libmosquitto1 (cat√©gorie: mqtt)
  ‚Ü¶ libmosquitto1 t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: libmosquitto1
‚ó¶ T√©l√©chargement [13/28]: libdlt2
[INFO] T√©l√©chargement du paquet: libdlt2 (cat√©gorie: mqtt)
  ‚Ü¶ libdlt2 t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: libdlt2
‚ó¶ T√©l√©chargement [14/28]: dnsmasq
[INFO] T√©l√©chargement du paquet: dnsmasq (cat√©gorie: ap)
  ‚Ü¶ dnsmasq t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: dnsmasq
‚ó¶ T√©l√©chargement [15/28]: iptables
[INFO] T√©l√©chargement du paquet: iptables (cat√©gorie: ap)
  ‚Ü¶ iptables t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: iptables
‚ó¶ T√©l√©chargement [16/28]: python3-psutil
[INFO] T√©l√©chargement du paquet: python3-psutil (cat√©gorie: python)
  ‚Ü¶ python3-psutil t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: python3-psutil
‚ó¶ T√©l√©chargement [17/28]: python3-paho-mqtt
[INFO] T√©l√©chargement du paquet: python3-paho-mqtt (cat√©gorie: python)
  ‚Ü¶ python3-paho-mqtt t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: python3-paho-mqtt
‚ó¶ T√©l√©chargement [18/28]: python3-pip
[INFO] T√©l√©chargement du paquet: python3-pip (cat√©gorie: python)
  ‚Ü¶ python3-pip t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: python3-pip
‚ó¶ T√©l√©chargement [19/28]: python3-setuptools
[INFO] T√©l√©chargement du paquet: python3-setuptools (cat√©gorie: python)
  ‚Ü¶ python3-setuptools t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: python3-setuptools
‚ó¶ T√©l√©chargement [20/28]: i2c-tools
[INFO] T√©l√©chargement du paquet: i2c-tools (cat√©gorie: system)
  ‚Ü¶ i2c-tools t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: i2c-tools
‚ó¶ T√©l√©chargement [21/28]: php
[INFO] T√©l√©chargement du paquet: php (cat√©gorie: php)
  ‚Ü¶ php t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: php
‚ó¶ T√©l√©chargement [22/28]: php-cli
[INFO] T√©l√©chargement du paquet: php-cli (cat√©gorie: php)
  ‚Ü¶ php-cli t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: php-cli
‚ó¶ T√©l√©chargement [23/28]: php-fpm
[INFO] T√©l√©chargement du paquet: php-fpm (cat√©gorie: php)
  ‚Ü¶ php-fpm t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: php-fpm
‚ó¶ T√©l√©chargement [24/28]: htop
[INFO] T√©l√©chargement du paquet: htop (cat√©gorie: tools)
  ‚Ü¶ htop t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: htop
‚ó¶ T√©l√©chargement [25/28]: iotop
[INFO] T√©l√©chargement du paquet: iotop (cat√©gorie: tools)
  ‚Ü¶ iotop t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: iotop
‚ó¶ T√©l√©chargement [26/28]: net-tools
[INFO] T√©l√©chargement du paquet: net-tools (cat√©gorie: tools)
  ‚Ü¶ net-tools t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: net-tools
‚ó¶ T√©l√©chargement [27/28]: dnsutils
[INFO] T√©l√©chargement du paquet: dnsutils (cat√©gorie: tools)
  ‚Ü¶ dnsutils √©chec ‚úó
[ERROR] √âchec du t√©l√©chargement: dnsutils
‚ó¶ T√©l√©chargement [28/28]: python3-pil
[INFO] T√©l√©chargement du paquet: python3-pil (cat√©gorie: tools)
  ‚Ü¶ python3-pil t√©l√©charg√© ‚úì
[SUCCESS] Paquet t√©l√©charg√©: python3-pil

‚ó¶ T√©l√©chargement termin√©
  ‚Ü¶ Paquets t√©l√©charg√©s: 730
[INFO] Total paquets t√©l√©charg√©s: 730

  ‚Ü¶ Cache de paquets cr√©√© avec succ√®s ‚úì
[SUCCESS] Tous les paquets ont √©t√© t√©l√©charg√©s
=== Statistiques du cache ===
Emplacement : /var/cache/maxlink/packages
Taille      : 384M
Paquets     : 730
√Çge         : 0 jours
==========================

‚ó¶ T√©l√©chargement du dashboard MaxLink V3...
[INFO] D√©but du t√©l√©chargement du dashboard V3
  ‚Ü¶ Tentative 1/3...
[INFO] Tentative t√©l√©chargement dashboard 1/3
    ‚Ä¢ T√©l√©chargement termin√© (curl)
[INFO] T√©l√©chargement curl termin√©
    ‚Ä¢ Taille du fichier: 111 KB
    ‚Ä¢ V√©rification de l'archive...
  ‚Ü¶ Archive dashboard valide ‚úì
[SUCCESS] Archive dashboard valide
  ‚Ü¶ Dashboard t√©l√©charg√© avec succ√®s ‚úì
[SUCCESS] Dashboard t√©l√©charg√© apr√®s 1 tentative(s)

‚ó¶ Nettoyage du syst√®me...
[CMD] Ex√©cution: APT autoremove
[CMD] Commande: apt-get autoremove -y >/dev/null 2>&1
[CMD] Code de sortie: 0
[CMD] Ex√©cution: APT autoclean
[CMD] Commande: apt-get autoclean >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ Syst√®me nettoy√© ‚úì

========================================================================
√âTAPE 6 : CONFIGURATION DU SYST√àME
========================================================================

‚ó¶ Configuration du ventilateur...
[INFO] Configuration du ventilateur
  ‚Ü¶ Configuration ajout√©e ‚úì
[SUCCESS] Configuration ventilateur ajout√©e

‚ó¶ Personnalisation de l'interface...
[INFO] Installation du fond d'√©cran personnalis√©
[INFO] Ajout de la version MaxLink v3 sur l'image de fond
Erreur: name 'dest_image' is not defined
[SUCCESS] Version ajout√©e sur l'image
  ‚Ü¶ Fond d'√©cran install√© ‚úì
  ‚Ü¶ Bureau configur√© ‚úì
[SUCCESS] Configuration bureau LXDE appliqu√©e

========================================================================
√âTAPE 7 : FINALISATION
========================================================================

‚ó¶ R√©activation des mises √† jour automatiques...
  ‚Ü¶ Services de mise √† jour r√©activ√©s ‚úì
[INFO] Services de mise √† jour r√©activ√©s

‚ó¶ Restauration de l'√©tat r√©seau...
[INFO] Restauration de l'√©tat r√©seau
  ‚Ü¶ √âtat r√©seau restaur√© ‚úì

‚ó¶ Mise √† jour du statut du service...
Statut update mis √† jour: active
  ‚Ü¶ Statut du service update mis √† jour: active
  ‚Ü¶ Statut du service mis √† jour ‚úì
[INFO] Statut du service update mis √† jour: active

‚ó¶ Mise √† jour termin√©e avec succ√®s !
  ‚Ü¶ Version: v3
  ‚Ü¶ Syst√®me √† jour et configur√©
  ‚Ü¶ Cache de paquets cr√©√© pour installation offline
  ‚Ü¶ Dashboard V3 t√©l√©charg√©
[SUCCESS] Mise √† jour syst√®me termin√©e - Version: v3

‚ó¶ R√©sum√© du cache cr√©√© :
=== Statistiques du cache ===
Emplacement : /var/cache/maxlink/packages
Taille      : 384M
Paquets     : 730
√Çge         : 0 jours
==========================

  ‚Ü¶ Red√©marrage diff√©r√© (installation compl√®te en cours)

[INFO] Red√©marrage diff√©r√© - SKIP_REBOOT=true
[INFO] Script update_install termin√© avec le code 0

[SUCCESS] update_install.sh install√© avec succ√®s

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 2/8 : Point d'acc√®s WiFi
========================================================================

‚ó¶ Ex√©cution de ap_install.sh...

[INFO] Ex√©cution de ap_install.sh
[INFO] Script ap_install initialis√©
[INFO] ========== D√âBUT DE L'INSTALLATION AP ==========
========================================================================
√âTAPE 1 : V√âRIFICATIONS
========================================================================

[INFO] Privil√®ges root confirm√©s
‚ó¶ V√©rification de l'interface WiFi...
  ‚Ü¶ Interface wlan0 disponible ‚úì
[INFO] Interface wlan0 disponible

‚ó¶ V√©rification de NetworkManager...
  ‚Ü¶ NetworkManager actif ‚úì
[INFO] NetworkManager actif

========================================================================
√âTAPE 2 : INSTALLATION DES PAQUETS
========================================================================

‚ó¶ Installation de Point d'acc√®s...
[INFO] Installation hybride de Point d'acc√®s
  ‚Ü¶ D√©j√† install√© ‚úì
[INFO] Point d'acc√®s d√©j√† install√©

[SUCCESS] Tous les paquets AP install√©s

========================================================================
√âTAPE 3 : PR√âPARATION DU SYST√àME
========================================================================

‚ó¶ Configuration du resolv.conf...
[INFO] Configuration du resolv.conf
[CMD] Ex√©cution: Protection du resolv.conf
[CMD] Commande: chattr +i /etc/resolv.conf 2>/dev/null || true
[CMD] Code de sortie: 0
  ‚Ü¶ resolv.conf configur√© et prot√©g√© ‚úì
[INFO] resolv.conf configur√© avec succ√®s

‚ó¶ Nettoyage des services DNS conflictuels...
[INFO] D√©sactivation des services DNS conflictuels

‚ó¶ D√©sactivation des connexions WiFi existantes...
[INFO] Nettoyage des connexions WiFi existantes
[CMD] Ex√©cution: D√©connexion interface
[CMD] Commande: nmcli device disconnect wlan0 2>/dev/null || true
[OUT] Device 'wlan0' successfully disconnected.
[CMD] Code de sortie: 0
[CMD] Ex√©cution: Suppression ancienne config AP
[CMD] Commande: nmcli connection delete 'MaxLink-NETWORK' 2>/dev/null || true
[CMD] Code de sortie: 0
  ‚Ü¶ Connexions nettoy√©es ‚úì

‚ó¶ Configuration de NetworkManager...
[INFO] Configuration de NetworkManager pour dnsmasq
[CMD] Ex√©cution: Sauvegarde config NetworkManager
[CMD] Commande: cp /etc/NetworkManager/NetworkManager.conf /etc/NetworkManager/NetworkManager.conf.original
[CMD] Code de sortie: 0
  ‚Ü¶ NetworkManager configur√© pour dnsmasq ‚úì
[INFO] NetworkManager configur√© avec succ√®s

========================================================================
√âTAPE 4 : CONFIGURATION DU POINT D'ACC√àS
========================================================================

‚ó¶ Cr√©ation du profil Access Point...
  ‚Ü¶ SSID: MaxLink-NETWORK
  ‚Ü¶ IP: 192.168.4.1/24
  ‚Ü¶ Canal: 6 (2.4GHz)
[INFO] Configuration AP - SSID: MaxLink-NETWORK, IP: 192.168.4.1/24, Canal: 6
[CMD] Ex√©cution: Cr√©ation profil AP
[CMD] Commande: nmcli connection add     type wifi     ifname wlan0     con-name 'MaxLink-NETWORK'     autoconnect yes     ssid 'MaxLink-NETWORK'     mode ap     802-11-wireless.band bg     802-11-wireless.channel 6     802-11-wireless-security.key-mgmt wpa-psk 	802-11-wireless-security.proto rsn 	802-11-wireless-security.pairwise ccmp 	802-11-wireless-security.group ccmp     802-11-wireless-security.psk 'MDPsupersecret007'     ipv4.method shared     ipv4.addresses '192.168.4.1/24'     ipv6.method disabled
[OUT] Connection 'MaxLink-NETWORK' (1e16cd09-ab40-4496-a247-b99a3d6ee10d) successfully added.
[CMD] Code de sortie: 0
  ‚Ü¶ Profil AP cr√©√© ‚úì
[SUCCESS] Profil AP cr√©√© avec succ√®s

‚ó¶ Configuration DHCP et DNS...
[INFO] Configuration DHCP/DNS pour l'AP
  ‚Ü¶ Configuration DHCP/DNS cr√©√©e ‚úì
[INFO] Configuration dnsmasq cr√©√©e dans /etc/NetworkManager/dnsmasq-shared.d/
  ‚Ü¶ Configuration DNS suppl√©mentaire ajout√©e ‚úì
[INFO] Configuration DNS suppl√©mentaire cr√©√©e

========================================================================
√âTAPE 5 : CONFIGURATION DU PARE-FEU
========================================================================

‚ó¶ Configuration des r√®gles de pare-feu...
[INFO] Configuration des r√®gles iptables

========================================================================
√âTAPE 6 : ACTIVATION DU POINT D'ACC√àS
========================================================================

‚ó¶ D√©marrage du point d'acc√®s...
[INFO] Activation du point d'acc√®s
[CMD] Ex√©cution: Red√©marrage NetworkManager
[CMD] Commande: systemctl restart NetworkManager
[CMD] Code de sortie: 0
[CMD] Ex√©cution: Activation connexion AP
[CMD] Commande: nmcli connection up 'MaxLink-NETWORK'
[OUT] Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/2)
[CMD] Code de sortie: 0
  ‚Ü¶ Point d'acc√®s activ√© ‚úì
[SUCCESS] Point d'acc√®s activ√© avec succ√®s

‚ó¶ V√©rification de l'√©tat...
[INFO] V√©rification de l'√©tat du point d'acc√®s
  ‚Ü¶ Point d'acc√®s op√©rationnel ‚úì
[SUCCESS] Point d'acc√®s op√©rationnel
  ‚Ü¶ Service DNS actif ‚úì
[INFO] Service dnsmasq actif

========================================================================
√âTAPE 7 : FINALISATION
========================================================================

‚ó¶ Configuration de d√©marrage automatique...
  ‚Ü¶ Le point d'acc√®s d√©marrera automatiquement ‚úì
[INFO] Configuration de d√©marrage automatique activ√©e

‚ó¶ Mise √† jour du statut du service...
Statut ap mis √† jour: active
  ‚Ü¶ Statut du service ap mis √† jour: active
  ‚Ü¶ Statut du service mis √† jour ‚úì
[INFO] Statut du service ap mis √† jour: active

‚ó¶ Informations de connexion :
  ‚Ü¶ Nom du r√©seau : MaxLink-NETWORK
  ‚Ü¶ Mot de passe  : MDPsupersecret007
  ‚Ü¶ Adresse IP    : 192.168.4.1
  ‚Ü¶ Plage DHCP    : 192.168.4.10 - 192.168.4.100

‚ó¶ Acc√®s au dashboard :
  ‚Ü¶ http://192.168.4.1
  ‚Ü¶ http://maxlink-dashboard.local
  ‚Ü¶ http://dashboard.local
[INFO] Configuration finale:
[INFO]   - SSID: MaxLink-NETWORK
[INFO]   - IP: 192.168.4.1
[INFO]   - DHCP: 192.168.4.10 - 192.168.4.100

‚ó¶ Installation termin√©e avec succ√®s !

‚ó¶ IMPORTANT : L'orchestrateur doit √™tre install√© pour g√©rer le d√©marrage ordonn√©

‚ó¶ Test rapide de la r√©solution DNS...
  ‚Ü¶ DNS non fonctionnel - Un red√©marrage peut √™tre n√©cessaire ‚ö†
[WARN] Test DNS final √©chou√© - red√©marrage recommand√©

  ‚Ü¶ Red√©marrage diff√©r√© (installation compl√®te en cours)

[INFO] Red√©marrage diff√©r√© - SKIP_REBOOT=true
[INFO] Script ap_install termin√© avec le code 0

[SUCCESS] ap_install.sh install√© avec succ√®s

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 3/8 : Serveur Web et Dashboard
========================================================================

‚ó¶ Ex√©cution de nginx_install.sh...

[INFO] Ex√©cution de nginx_install.sh
[INFO] Script nginx_install initialis√©
[INFO] ========== D√âBUT DE L'INSTALLATION NGINX ET DASHBOARD (OFFLINE) ==========
========================================================================
√âTAPE 1 : V√âRIFICATIONS
========================================================================

[INFO] Privil√®ges root confirm√©s
  ‚Ü¶ Privil√®ges root confirm√©s ‚úì

‚ó¶ V√©rification du cache local...
[INFO] V√©rification du cache dashboard
  ‚Ü¶ Dashboard trouv√© dans le cache ‚úì
[INFO] Dashboard valide trouv√© dans le cache

========================================================================
√âTAPE 2 : INSTALLATION DE NGINX
========================================================================

‚ó¶ Installation de Nginx depuis le cache...
[INFO] Installation de Nginx depuis le cache local
[INFO] Installation des paquets de la cat√©gorie: nginx
  ‚Ü¶ Installation de nginx...
[INFO] Installation du paquet depuis le cache: nginx
[INFO] Fichiers .deb trouv√©s pour nginx: 2 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/nginx_1.26.3-3+deb13u1_arm64.deb
/var/cache/maxlink/packages/nginx-common_1.26.3-3+deb13u1_all.deb
[SUCCESS] Paquet install√© depuis le cache: nginx
    ‚úì nginx install√©
  ‚Ü¶ Installation de nginx-common...
[INFO] Installation du paquet depuis le cache: nginx-common
[INFO] Fichiers .deb trouv√©s pour nginx-common: 1 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/nginx-common_1.26.3-3+deb13u1_all.deb
[SUCCESS] Paquet install√© depuis le cache: nginx-common
    ‚úì nginx-common install√©
  ‚Ü¶ Nginx install√© depuis le cache ‚úì
[SUCCESS] Nginx install√© avec succ√®s depuis le cache

‚ó¶ Pr√©paration de Nginx...
[CMD] Ex√©cution: Arr√™t Nginx
[CMD] Commande: systemctl stop nginx >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ Service Nginx arr√™t√© ‚úì

========================================================================
√âTAPE 3 : INSTALLATION DU DASHBOARD
========================================================================


‚ó¶ Extraction du dashboard depuis le cache...
[INFO] R√©pertoire temporaire: /tmp/maxlink-dashboard-1761120658
  ‚Ü¶ Extraction de l'archive...
[CMD] Ex√©cution: Extraction archive
[CMD] Commande: tar -xzf '/var/cache/maxlink/dashboard/dashboard.tar.gz' -C '/tmp/maxlink-dashboard-1761120658'
[CMD] Code de sortie: 0
  ‚Ü¶ Archive extraite ‚úì
[SUCCESS] Archive extraite avec succ√®s
[INFO] Dossier racine de l'archive: /tmp/maxlink-dashboard-1761120658/DashboardV3-main
[INFO] Recherche du dashboard dans: /tmp/maxlink-dashboard-1761120658/DashboardV3-main
  ‚Ü¶ Dossier dashboard trouv√© ‚úì
[INFO] Dossier dashboard trouv√©: /tmp/maxlink-dashboard-1761120658/DashboardV3-main
  ‚Ü¶ Cr√©ation du r√©pertoire destination...
[INFO] R√©pertoire destination cr√©√©: /var/www/maxlink-dashboard
[CMD] Ex√©cution: Copie dashboard
[CMD] Commande: cp -r '/tmp/maxlink-dashboard-1761120658/DashboardV3-main'/* '/var/www/maxlink-dashboard'/
[CMD] Code de sortie: 0
  ‚Ü¶ Dashboard install√© ‚úì
[SUCCESS] Dashboard install√© avec succ√®s
[INFO] Nettoyage du r√©pertoire temporaire

‚ó¶ Configuration des permissions...
[CMD] Ex√©cution: Application propri√©taire
[CMD] Commande: chown -R www-data:www-data '/var/www/maxlink-dashboard'
[CMD] Code de sortie: 0
[CMD] Ex√©cution: Permissions standard
[CMD] Commande: chmod -R 755 '/var/www/maxlink-dashboard'
[CMD] Code de sortie: 0
  ‚Ü¶ Permissions configur√©es ‚úì
[INFO] Permissions appliqu√©es au dashboard

========================================================================
√âTAPE 4 : CONFIGURATION DE NGINX
========================================================================

‚ó¶ Cr√©ation de la configuration du site...
[INFO] Cr√©ation de la configuration Nginx
  ‚Ü¶ Configuration cr√©√©e ‚úì
[SUCCESS] Configuration Nginx cr√©√©e

‚ó¶ Activation du site...
[CMD] Ex√©cution: Suppression site par d√©faut
[CMD] Commande: rm -f /etc/nginx/sites-enabled/default 2>/dev/null || true
[CMD] Code de sortie: 0
[CMD] Ex√©cution: Suppression ancien lien
[CMD] Commande: rm -f /etc/nginx/sites-enabled/maxlink-dashboard 2>/dev/null || true
[CMD] Code de sortie: 0
[CMD] Ex√©cution: Cr√©ation lien symbolique
[CMD] Commande: ln -s /etc/nginx/sites-available/maxlink-dashboard /etc/nginx/sites-enabled/
[CMD] Code de sortie: 0
  ‚Ü¶ Site activ√© ‚úì
[INFO] Site Nginx activ√©
[CMD] Ex√©cution: Test configuration Nginx
[CMD] Commande: nginx -t >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ Configuration valid√©e ‚úì
[SUCCESS] Configuration Nginx valide

‚ó¶ D√©marrage de Nginx...
[CMD] Ex√©cution: Activation au d√©marrage
[CMD] Commande: systemctl enable nginx >/dev/null 2>&1
[CMD] Code de sortie: 0
[CMD] Ex√©cution: D√©marrage Nginx
[CMD] Commande: systemctl start nginx >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ Nginx d√©marr√© et activ√© ‚úì
[SUCCESS] Nginx d√©marr√© avec succ√®s

========================================================================
√âTAPE 5 : CONFIGURATION DNS
========================================================================

[INFO] V√©rification de la configuration AP existante
‚ó¶ Mode AP d√©tect√©, mise √† jour de la configuration DNS...
[INFO] Mode AP d√©tect√©, mise √† jour DNS n√©cessaire
  ‚Ü¶ Configuration DNS d√©j√† pr√©sente ‚úì
[INFO] Configuration DNS d√©j√† pr√©sente

‚ó¶ Mise √† jour du statut du service...
Statut nginx mis √† jour: active
  ‚Ü¶ Statut du service nginx mis √† jour: active
  ‚Ü¶ Statut du service mis √† jour ‚úì
[INFO] Statut du service nginx mis √† jour: active

‚ó¶ Installation termin√©e avec succ√®s !
  ‚Ü¶ Dashboard install√© dans : /var/www/maxlink-dashboard
  ‚Ü¶ Accessible via :
    ‚Ä¢ http://192.168.4.1
    ‚Ä¢ http://maxlink-dashboard.local
    ‚Ä¢ http://maxlink-dashboard.local
    ‚Ä¢ http://dashboard.local
[INFO] Installation termin√©e avec succ√®s
[INFO] Dashboard accessible √†: http://192.168.4.1 et http://maxlink-dashboard.local

  ‚Ü¶ Red√©marrage diff√©r√© (installation compl√®te en cours)

[INFO] Red√©marrage diff√©r√© - SKIP_REBOOT=true
[INFO] Script nginx_install termin√© avec le code 0

[SUCCESS] nginx_install.sh install√© avec succ√®s

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 4/8 : Correctif NCSI Windows
========================================================================

  ‚Ü¶ Script non trouv√© : /media/prod/USBTOOL/scripts/install/fake_ncsi_install.sh ‚úó
  ‚Ü¶ ERREUR : Impossible de continuer sans ce script
[ERROR] Script non trouv√©: /media/prod/USBTOOL/scripts/install/fake_ncsi_install.sh

========================================================================
√âTAPE 5/8 : Broker MQTT
========================================================================

‚ó¶ Ex√©cution de mqtt_install.sh...

[INFO] Ex√©cution de mqtt_install.sh
[INFO] Script mqtt_install initialis√©
[INFO] ========== D√âBUT DE L'INSTALLATION MQTT BROKER ==========

========================================================================
INSTALLATION DU BROKER MQTT (MOSQUITTO)
========================================================================

Configuration : utilisateur 'mosquitto' / mot de passe 'mqtt'

[INFO] Privil√®ges root confirm√©s
√âTAPE 1 : PR√âPARATION DU SYST√àME
========================================================================

‚ó¶ Nettoyage du syst√®me de paquets...
  ‚Ü¶ Syst√®me de paquets pr√™t ‚úì
[INFO] Syst√®me de paquets nettoy√©

========================================================================
√âTAPE 2 : INSTALLATION DES PAQUETS
========================================================================

‚ó¶ Installation de Mosquitto et d√©pendances...
[INFO] Installation hybride de Mosquitto et d√©pendances
  ‚Ü¶ Recherche dans le cache local...
[INFO] Tentative d'installation depuis le cache
  ‚Ü¶ Install√© depuis le cache ‚úì
[SUCCESS] Mosquitto et d√©pendances install√© depuis le cache

[SUCCESS] Tous les paquets install√©s avec succ√®s
  ‚Ü¶ Mosquitto install√© ‚úì
[INFO] Mosquitto install√© avec succ√®s

========================================================================
√âTAPE 3 : CONFIGURATION SYST√àME
========================================================================

‚ó¶ V√©rification de l'utilisateur syst√®me...
  ‚Ü¶ Utilisateur syst√®me existant ‚úì

‚ó¶ Cr√©ation des r√©pertoires...
  ‚Ü¶ R√©pertoires cr√©√©s et permissions appliqu√©es ‚úì
[INFO] R√©pertoires Mosquitto cr√©√©s

‚ó¶ Mise √† jour du cache des biblioth√®ques...
  ‚Ü¶ Cache des biblioth√®ques mis √† jour ‚úì
[INFO] ldconfig ex√©cut√©

========================================================================
√âTAPE 4 : CONFIGURATION DE MOSQUITTO
========================================================================

‚ó¶ Cr√©ation de l'utilisateur MQTT...
[CMD] Ex√©cution: Cr√©ation utilisateur MQTT
[CMD] Commande: /usr/bin/mosquitto_passwd -b -c '/etc/mosquitto/passwords' 'mosquitto' 'mqtt'
[CMD] Code de sortie: 0
  ‚Ü¶ Utilisateur 'mosquitto' cr√©√© ‚úì
[INFO] Utilisateur MQTT cr√©√©: mosquitto

‚ó¶ Cr√©ation du fichier de configuration avec statistiques...
[INFO] Ancienne configuration sauvegard√©e
  ‚Ü¶ Configuration cr√©√©e avec statistiques activ√©es ‚úì
[SUCCESS] Configuration Mosquitto cr√©√©e avec topics syst√®me

‚ó¶ Configuration des permissions ACL...
  ‚Ü¶ Permissions ACL configur√©es ‚úì
[INFO] Fichier ACL cr√©√©

========================================================================
√âTAPE 5 : D√âMARRAGE DU SERVICE
========================================================================

‚ó¶ Activation du service au d√©marrage...
[CMD] Ex√©cution: Activation au d√©marrage
[CMD] Commande: systemctl enable mosquitto >/dev/null 2>&1
[CMD] Code de sortie: 0
  ‚Ü¶ Service activ√© ‚úì

‚ó¶ D√©marrage de Mosquitto...
[CMD] Ex√©cution: D√©marrage Mosquitto
[CMD] Commande: systemctl start mosquitto
[CMD] Code de sortie: 0
  ‚Ü¶ Mosquitto d√©marr√© ‚úì
[SUCCESS] Mosquitto d√©marr√© avec succ√®s
  ‚Ü¶ Service actif et fonctionnel ‚úì
[INFO] Service Mosquitto actif

========================================================================
√âTAPE 6 : TESTS DE CONNEXION
========================================================================

‚ó¶ Test de connexion MQTT (port 1883)...
  ‚Ü¶ Connexion MQTT r√©ussie ‚úì
[SUCCESS] Test de connexion MQTT r√©ussi

‚ó¶ Test du port WebSocket (9001)...
  ‚Ü¶ Port WebSocket non accessible ‚ö†
[WARN] Port WebSocket non accessible imm√©diatement

‚ó¶ Test des topics syst√®me ()...
mosquitto version 2.0.21
  ‚Ü¶ Topics syst√®me accessibles ‚úì
[SUCCESS] Topics syst√®me  accessibles

‚ó¶ Mise √† jour du statut du service...
Statut mqtt mis √† jour: active
  ‚Ü¶ Statut du service mqtt mis √† jour: active
  ‚Ü¶ Statut du service mis √† jour ‚úì
[INFO] Statut du service mqtt mis √† jour: active

========================================================================
INSTALLATION TERMIN√âE AVEC SUCC√àS !
========================================================================

‚ó¶ Broker MQTT Mosquitto install√© et configur√©
‚ó¶ Topics syst√®me () activ√©s pour les statistiques

‚ó¶ Informations de connexion :
  ‚Ä¢ Serveur      : localhost (ou IP du Raspberry Pi)
  ‚Ä¢ Port MQTT    : 1883
  ‚Ä¢ Port WebSocket : 9001
  ‚Ä¢ Utilisateur  : mosquitto
  ‚Ä¢ Mot de passe : mqtt

‚ó¶ Commandes utiles :
  ‚Ä¢ √âtat : systemctl status mosquitto
  ‚Ä¢ Logs : journalctl -u mosquitto -f
  ‚Ä¢ Test : mosquitto_sub -h localhost -u mosquitto -P mqtt -t '#' -v

‚ó¶ IMPORTANT : L'orchestrateur doit √™tre install√© pour g√©rer le d√©marrage

[SUCCESS] Installation MQTT Broker termin√©e
[INFO] Configuration: mosquitto/mqtt sur ports 1883 et 9001

  ‚Ü¶ Red√©marrage diff√©r√© (installation compl√®te en cours)

[INFO] Red√©marrage diff√©r√© - SKIP_REBOOT=true
[INFO] Script mqtt_install termin√© avec le code 0

[SUCCESS] mqtt_install.sh install√© avec succ√®s

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 6/8 : Widgets MQTT
========================================================================

‚ó¶ Ex√©cution de mqtt_wgs_install.sh...

[INFO] Ex√©cution de mqtt_wgs_install.sh
[INFO] Script mqtt_wgs_install initialis√©
[INFO] ========== D√âBUT DE L'INSTALLATION DES WIDGETS MQTT ==========

========================================================================
INSTALLATION DES WIDGETS MQTT (WGS)
========================================================================

‚ó¶ V√©rification du broker MQTT...
  ‚Ü¶ Broker MQTT actif ‚úì

‚ó¶ Recherche des widgets disponibles...
  ‚Ü¶ 7 widget(s) trouv√©(s) ‚úì

Widgets disponibles :
  ‚Ä¢ mqttstats
  ‚Ä¢ rebootbutton
  ‚Ä¢ servermonitoring
  ‚Ä¢ testpersist
  ‚Ä¢ timesync
  ‚Ä¢ uptime
  ‚Ä¢ wifistats

[INFO] Installation des d√©pendances Python
‚ó¶ V√©rification des paquets Python...
  ‚Ü¶ Installation des paquets manquants...
[INFO] Installation des paquets de la cat√©gorie: python
  ‚Ü¶ Installation de python3-psutil...
[INFO] Installation du paquet depuis le cache: python3-psutil
[INFO] Fichiers .deb trouv√©s pour python3-psutil: 1 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/python3-psutil_7.0.0-2_arm64.deb
[SUCCESS] Paquet install√© depuis le cache: python3-psutil
    ‚úì python3-psutil install√©
  ‚Ü¶ Installation de python3-paho-mqtt...
[INFO] Installation du paquet depuis le cache: python3-paho-mqtt
[INFO] Fichiers .deb trouv√©s pour python3-paho-mqtt: 1 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/python3-paho-mqtt_2.1.0-1_all.deb
[SUCCESS] Paquet install√© depuis le cache: python3-paho-mqtt
    ‚úì python3-paho-mqtt install√©
  ‚Ü¶ Installation de python3-pip...
[INFO] Installation du paquet depuis le cache: python3-pip
[INFO] Fichiers .deb trouv√©s pour python3-pip: 1 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/python3-pip_25.1.1+dfsg-1_all.deb
[SUCCESS] Paquet install√© depuis le cache: python3-pip
    ‚úì python3-pip install√©
  ‚Ü¶ Installation de python3-setuptools...
[INFO] Installation du paquet depuis le cache: python3-setuptools
[INFO] Fichiers .deb trouv√©s pour python3-setuptools: 1 fichier(s)
[INFO] Fichiers: /var/cache/maxlink/packages/python3-setuptools_78.1.1-0.1_all.deb
[SUCCESS] Paquet install√© depuis le cache: python3-setuptools
    ‚úì python3-setuptools install√©
  ‚Ü¶ D√©pendances Python install√©es ‚úì

========================================================================
INSTALLATION DES WIDGETS
========================================================================

Installation du widget: mqttstats
------------------------------------
[SUCCESS] Widget mqttstats valid√©
  ‚Ü¶ Copie du core des widgets...
[INFO] V√©rification des d√©pendances Python pour mqttstats
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-mqttstats
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-mqttstats.service
[SUCCESS] Service activ√©: maxlink-widget-mqttstats
[SUCCESS] Service d√©marr√©: maxlink-widget-mqttstats
[SUCCESS] Widget mqttstats enregistr√©
  ‚Ü¶ Widget mqttstats install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

Installation du widget: rebootbutton
------------------------------------
[SUCCESS] Widget rebootbutton valid√©
[INFO] V√©rification des d√©pendances Python pour rebootbutton
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-rebootbutton
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-rebootbutton.service
[SUCCESS] Service activ√©: maxlink-widget-rebootbutton
[SUCCESS] Service d√©marr√©: maxlink-widget-rebootbutton
[SUCCESS] Widget rebootbutton enregistr√©
  ‚Ü¶ Widget rebootbutton install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

Installation du widget: servermonitoring
------------------------------------
[SUCCESS] Widget servermonitoring valid√©
[INFO] V√©rification des d√©pendances Python pour servermonitoring
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-servermonitoring
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-servermonitoring.service
[SUCCESS] Service activ√©: maxlink-widget-servermonitoring
[SUCCESS] Service d√©marr√©: maxlink-widget-servermonitoring
[SUCCESS] Widget servermonitoring enregistr√©
  ‚Ü¶ Widget servermonitoring install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

Installation du widget: testpersist
------------------------------------
[SUCCESS] Widget testpersist valid√©
[INFO] V√©rification des d√©pendances Python pour testpersist
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-testpersist
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-testpersist.service
[SUCCESS] Service activ√©: maxlink-widget-testpersist
[SUCCESS] Service d√©marr√©: maxlink-widget-testpersist
[SUCCESS] Widget testpersist enregistr√©
  ‚Ü¶ Widget testpersist install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

Installation du widget: timesync
------------------------------------
[SUCCESS] Widget timesync valid√©
[INFO] V√©rification des d√©pendances Python pour timesync
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-timesync
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-timesync.service
[SUCCESS] Service activ√©: maxlink-widget-timesync
[SUCCESS] Service d√©marr√©: maxlink-widget-timesync
[SUCCESS] Widget timesync enregistr√©
  ‚Ü¶ Widget timesync install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

Installation du widget: uptime
------------------------------------
[SUCCESS] Widget uptime valid√©
[INFO] V√©rification des d√©pendances Python pour uptime
[INFO] Aucune d√©pendance Python pour uptime
  ‚Ü¶ Widget passif (pas de collector)
[SUCCESS] Widget uptime enregistr√©
  ‚Ü¶ Widget uptime install√© ‚úì

Installation du widget: wifistats
------------------------------------
[SUCCESS] Widget wifistats valid√©
[INFO] V√©rification des d√©pendances Python pour wifistats
[INFO] D√©pendances Python v√©rifi√©es (install√©es via le cache)
[INFO] Cr√©ation du service maxlink-widget-wifistats
[INFO] Copie des fichiers du widget vers /opt/maxlink
[INFO] Service cr√©√© : maxlink-widget-wifistats.service
[SUCCESS] Service activ√©: maxlink-widget-wifistats
[SUCCESS] Service d√©marr√©: maxlink-widget-wifistats
[SUCCESS] Widget wifistats enregistr√©
  ‚Ü¶ Widget wifistats install√© ‚úì
  ‚Ü¶ Note : L'orchestrateur g√®re le d√©marrage ordonn√©

========================================================================
V√âRIFICATION FINALE
========================================================================

‚ó¶ √âtat des services :
  ‚Ü¶ mqttstats : ‚úì actif
  ‚Ü¶ rebootbutton : ‚úì actif
  ‚Ü¶ servermonitoring : ‚úì actif
  ‚Ü¶ testpersist : ‚úì actif
  ‚Ü¶ timesync : ‚úì actif
  ‚Ü¶ uptime : ‚úó inactif
  ‚Ü¶ wifistats : ‚úì actif

‚ó¶ Test de r√©ception MQTT...
  ‚Ü¶ Messages MQTT re√ßus ‚úì

‚ó¶ Mise √† jour du statut du service...
Statut mqtt_wgs mis √† jour: active
  ‚Ü¶ Statut du service mqtt_wgs mis √† jour: active
  ‚Ü¶ Statut du service mis √† jour : active ‚úì
[INFO] Statut du service mqtt_wgs mis √† jour: active

========================================================================
R√âSUM√â
========================================================================

‚ó¶ Widgets trouv√©s    : 7
‚ó¶ Widgets install√©s  : 7
‚ó¶ Widgets √©chou√©s    : 0

‚úì Installation termin√©e avec succ√®s !
[SUCCESS] Tous les widgets install√©s avec succ√®s
Commandes utiles :
  ‚Ä¢ Voir tous les logs    : journalctl -u 'maxlink-widget-*' -f
  ‚Ä¢ Voir tous les topics  : mosquitto_sub -h localhost -u mosquitto -P mqtt -t '#' -v
  ‚Ä¢ √âtat des services     : systemctl status 'maxlink-widget-*'

[INFO] Installation termin√©e - Install√©s: 7/7

  ‚Ü¶ Red√©marrage diff√©r√© (installation compl√®te en cours)

[INFO] Red√©marrage diff√©r√© - SKIP_REBOOT=true
[INFO] Script mqtt_wgs_install termin√© avec le code 0

[SUCCESS] mqtt_wgs_install.sh install√© avec succ√®s

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 7/8 : Systeme php
========================================================================

‚ó¶ Ex√©cution de php_archives_install.sh...

[INFO] Ex√©cution de php_archives_install.sh
[INFO] Script php_archives_install initialis√©
[INFO] ========== D√âBUT DE L'INSTALLATION PHP Archives System ==========

========================================================================
INSTALLATION PHP Archives System (VERSION FINALE 100%)
========================================================================

üîç V√©rifications initiales...
   ‚úÖ Privil√®ges root confirm√©s
[SUCCESS] Privil√®ges root confirm√©s

========================================================================
√âTAPE 1 : V√âRIFICATION DES PR√âREQUIS
========================================================================

[INFO] V√©rification des pr√©requis pour PHP Archives System
[SUCCESS] Pr√©requis valid√©s
   ‚úÖ Tous les pr√©requis sont satisfaits

========================================================================
√âTAPE 2 : INSTALLATION PHP
========================================================================

   ‚Ü¶ PHP non install√© - installation compl√®te n√©cessaire
‚ó¶ Installation de PHP depuis le cache...
[INFO] Installation de PHP depuis le cache local
  ‚Ü¶ V√©rification du cache PHP...
[INFO] V√©rification compl√®te du cache pour la cat√©gorie: php
  ‚Ü¶ V√©rification de la pr√©sence de tous les paquets php...
    ‚úì Pr√©sent: php (11 fichier(s))
[SUCCESS] Paquet trouv√© dans cache: php
    ‚úì Pr√©sent: php-cli (1 fichier(s))
[SUCCESS] Paquet trouv√© dans cache: php-cli
    ‚úì Pr√©sent: php-fpm (1 fichier(s))
[SUCCESS] Paquet trouv√© dans cache: php-fpm
  ‚Ü¶ R√©sum√©: 3/3 paquets pr√©sents
  ‚Ü¶ ‚úÖ Tous les paquets php sont pr√©sents dans le cache
[SUCCESS] Cache complet pour php
  ‚Ü¶ ‚úÖ Cache PHP v√©rifi√© et complet
  ‚Ü¶ V√©rification des installations existantes...
  ‚Ü¶ Installation PHP compl√®te n√©cessaire
[INFO] Installation PHP compl√®te n√©cessaire
  ‚Ü¶ Installation simultan√©e de tous les paquets PHP...
[INFO] Lancement de l'installation simultan√©e PHP
[INFO] Installation simultan√©e des paquets de la cat√©gorie: php
  ‚Ü¶ Collecte des fichiers .deb pour installation simultan√©e...
    ‚úì Fichier trouv√©: php
    ‚úì Fichier trouv√©: php-cli
    ‚úì Fichier trouv√©: php-fpm
  ‚Ü¶ Fichiers collect√©s: 3 paquets pr√™ts
[INFO] Fichiers .deb collect√©s pour installation:  /var/cache/maxlink/packages/php-common_2%3a96_all.deb
/var/cache/maxlink/packages/php-fpm_2%3a8.4+96_all.deb
/var/cache/maxlink/packages/php8.4-cli_8.4.11-1_arm64.deb
/var/cache/maxlink/packages/php-cli_2%3a8.4+96_all.deb
/var/cache/maxlink/packages/php8.4_8.4.11-1_all.deb
/var/cache/maxlink/packages/php_2%3a8.4+96_all.deb
/var/cache/maxlink/packages/php8.4-opcache_8.4.11-1_arm64.deb
/var/cache/maxlink/packages/php8.4-cgi_8.4.11-1_arm64.deb
/var/cache/maxlink/packages/php8.4-readline_8.4.11-1_arm64.deb
/var/cache/maxlink/packages/php8.4-common_8.4.11-1_arm64.deb
/var/cache/maxlink/packages/php8.4-fpm_8.4.11-1_arm64.deb /var/cache/maxlink/packages/php-cli_2%3a8.4+96_all.deb /var/cache/maxlink/packages/php-fpm_2%3a8.4+96_all.deb
  ‚Ü¶ Installation simultan√©e de tous les paquets php...
[INFO] Lancement installation dpkg simultan√©e
    ‚úì Tous les paquets php install√©s simultan√©ment
[SUCCESS] Installation simultan√©e r√©ussie pour php
  ‚Ü¶ ‚úÖ PHP install√© avec succ√®s depuis le cache
[SUCCESS] PHP install√© avec succ√®s
  ‚Ü¶ V√©rification post-installation...
    ‚úì php v√©rifi√©
    ‚úì php-cli v√©rifi√©
    ‚úì php-fpm v√©rifi√©
  ‚Ü¶ ‚úÖ V√©rification post-installation r√©ussie
[SUCCESS] V√©rification post-installation PHP r√©ussie
   ‚úÖ PHP install√© avec succ√®s

========================================================================
√âTAPE 3 : ACTIVATION PHP-FPM
========================================================================

[INFO] Activation du service PHP-FPM
  ‚Ü¶ Activation de PHP-FPM...
    ‚úó √âchec activation PHP-FPM
[ERROR] √âchec activation PHP-FPM
[ERROR] √âchec de l'activation PHP-FPM
Statut php_archives mis √† jour: inactive
  ‚Ü¶ Statut du service php_archives mis √† jour: inactive
[INFO] Script php_archives_install termin√© avec le code 1

  ‚Ü¶ Systeme php : √âchec de l'installation ‚úó
  ‚Ü¶ ERREUR : Consultez les logs pour plus de d√©tails
[ERROR] php_archives_install.sh a √©chou√©

  ‚Ü¶ Poursuite de l'installation malgr√© l'erreur...

  ‚Ü¶ Pause avant l'√©tape suivante... 10 9 8 7 6 5 4 3 2 1 ‚úì

========================================================================
√âTAPE 8/8 : Orchestrateur et finalisation
========================================================================

‚ó¶ Ex√©cution de orchestrator_install.sh...

[INFO] Ex√©cution de orchestrator_install.sh
[INFO] Script orchestrator_install initialis√©

========================================================================
ORCHESTRATEUR MAXLINK - INSTALLATION
========================================================================

‚ó¶ Premi√®re installation d√©tect√©e
[INFO] Premi√®re installation de l'orchestrateur

========================================================================
COPIE DES WIDGETS
========================================================================
‚ö† R√©pertoire des widgets non trouv√© : /media/prod/USBTOOL/widgets
[ERROR] R√©pertoire widgets non trouv√©
‚ö† Erreur lors de la copie des widgets
[ERROR] √âchec de la copie des widgets

========================================================================
CONFIGURATION DES PERMISSIONS SSH POUR L'UTILISATEUR PROD
========================================================================
‚ó¶ Activation du support ACL sur le syst√®me de fichiers...
  ‚Ü¶ ACL activ√© ‚úì
‚ó¶ Configuration des permissions ACL pour l'utilisateur prod...
‚ó¶ R√©initialisation du masque ACL...
  ‚Ü¶ Masque ACL r√©initialis√© √† rwx ‚úì
  ‚Ü¶ Permissions ACL configur√©es ‚úì
  ‚Ü¶ Script de maintenance cr√©√© : /usr/local/bin/maxlink-fix-prod-permissions

‚ó¶ V√©rification des permissions...
  ‚Ü¶ Permissions ACL v√©rifi√©es ‚úì
  ‚ö† Masque ACL incorrect (r-x), correction...
  ‚Ü¶ Masque corrig√© ‚úì
[SUCCESS] Permissions SSH configur√©es pour l'utilisateur prod

========================================================================
CONFIGURATION DU MODULE RTC
========================================================================
‚ó¶ D√©tection du module RTC...
  ‚Ü¶ Module RTC d√©tect√© : ds3231 ‚úì
[INFO] Module RTC ds3231 d√©tect√©
‚ó¶ Configuration du device tree overlay...
  ‚Ü¶ Overlay ajout√© au fichier de configuration ‚úì
[SUCCESS] Overlay RTC configur√© dans /boot/firmware/config.txt
‚ó¶ V√©rification des outils RTC...
  ‚ö† hwclock non trouv√©, installation peut √™tre n√©cessaire
‚ó¶ Cr√©ation du service de synchronisation RTC...
  ‚Ü¶ Service de synchronisation cr√©√© ‚úì
[SUCCESS] Service RTC configur√©
‚ó¶ D√©sactivation de fake-hwclock...
  ‚Ü¶ fake-hwclock non pr√©sent ‚úì
‚ó¶ D√©sactivation des services NTP (serveur hors ligne)...
  ‚Ü¶ systemd-timesyncd d√©sactiv√© ‚úì
  ‚Ü¶ Synchronisation temps r√©seau compl√®tement d√©sactiv√©e ‚úì

‚úì Configuration RTC termin√©e
  Module : ds3231
  Service : maxlink-rtc-sync.service
  Services NTP : d√©sactiv√©s
[SUCCESS] Configuration RTC compl√®te pour module ds3231 avec NTP d√©sactiv√©

========================================================================
INFRASTRUCTURE D'ORCHESTRATION
========================================================================
‚ó¶ Cr√©ation des scripts de v√©rification...
  ‚Ü¶ Scripts de v√©rification cr√©√©s ‚úì
[SUCCESS] Scripts healthcheck cr√©√©s
‚ó¶ Cr√©ation des services systemd...
  ‚Ü¶ Services systemd cr√©√©s ‚úì
[SUCCESS] Services systemd cr√©√©s
‚ó¶ Cr√©ation des targets systemd...
  ‚Ü¶ Targets systemd cr√©√©s ‚úì
[SUCCESS] Targets systemd cr√©√©s
‚ó¶ Configuration des d√©pendances des services...
  ‚Ü¶ D√©pendances configur√©es ‚úì
[SUCCESS] Overrides systemd configur√©s
‚ó¶ Cr√©ation du script orchestrateur...
  ‚Ü¶ Script orchestrateur cr√©√© ‚úì
[SUCCESS] Script de gestion cr√©√©

========================================================================
CONFIGURATION SYSTEMD
========================================================================
‚ó¶ Rechargement de la configuration systemd...
  ‚Ü¶ Configuration recharg√©e ‚úì
[SUCCESS] Systemd daemon-reload effectu√©

========================================================================
CORRECTION FINALE DES PERMISSIONS
========================================================================
‚ó¶ Correction du masque ACL apr√®s les installations...
  ‚Ü¶ Dashboard d√©tect√©, correction des permissions...
  ‚Ü¶ Permissions du dashboard corrig√©es ‚úì
[SUCCESS] Permissions du dashboard corrig√©es apr√®s installation
  ‚Ü¶ Masque ACL global corrig√© ‚úì

‚ó¶ √âtat final des permissions:
# owner: www-data
# group: www-data
user:prod:rwx
group::r-x
mask::rwx
default:user:prod:rwx
default:group::r-x
default:mask::rwx

========================================================================
ACTIVATION DE L'ORCHESTRATEUR
========================================================================
[2025-10-22 10:13:21] Activation des services MaxLink...
[2025-10-22 10:13:23] Services activ√©s
[SUCCESS] Services de l'orchestrateur activ√©s

========================================================================
INSTALLATION TERMIN√âE
========================================================================

‚úì L'orchestrateur MaxLink a √©t√© install√© avec succ√®s !

Commandes disponibles :
  maxlink-orchestrator start    - D√©marrer tous les services
  maxlink-orchestrator stop     - Arr√™ter tous les services
  maxlink-orchestrator status   - Voir l'√©tat des services
  maxlink-orchestrator restart  - Red√©marrer tous les services

Script de maintenance des permissions :
  /usr/local/bin/maxlink-fix-prod-permissions
[SUCCESS] Installation de l'orchestrateur termin√©e
[INFO] Script orchestrator_install termin√© avec le code 0

[SUCCESS] orchestrator_install.sh install√© avec succ√®s

========================================================================
INSTALLATION TERMIN√âE
========================================================================

Dur√©e totale : 7m 55s


========================================================================
STATUT DE L'INSTALLATION
========================================================================
  ‚úì update: active
  ‚úì ap: active
  ‚úì nginx: active
  ‚úó fake_ncsi: inactive
  ‚úì mqtt: active
  ‚úì mqtt_wgs: active
  ‚úó php_archives: inactive
  ‚úì orchestrator: active
========================================================================

‚ö† Installation termin√©e avec 2 erreur(s)

Certains composants n'ont pas pu √™tre install√©s correctement.
Consultez les logs pour plus de d√©tails :
  ‚Ä¢ Logs syst√®me : /media/prod/USBTOOL/logs/system
  ‚Ä¢ Logs d'installation : /media/prod/USBTOOL/logs/install

Actions possibles :
  ‚Ä¢ Relancer ce script pour r√©essayer les installations √©chou√©es
  ‚Ä¢ Installer manuellement les composants manquants
  ‚Ä¢ V√©rifier l'√©tat avec : sudo /media/prod/USBTOOL/check.sh

[ERROR] Installation termin√©e avec 2 erreurs
L'orchestrateur est install√©, un red√©marrage est recommand√©.

  ‚Ü¶ Red√©marrage du syst√®me dans 120 secondes...
